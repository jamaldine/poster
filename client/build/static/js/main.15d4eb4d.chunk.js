(this["webpackJsonpthe-poster"]=this["webpackJsonpthe-poster"]||[]).push([[0],{109:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),i=a.n(s),c=a(25),r=a.n(c),o=a(58),l=a(13),d=a(10),u=a(53),m=a.n(u),j=a(15),p=a(2),h=Object(d.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"AUTH":return Object(p.a)(Object(p.a)({},e),{},{login:t.payload});case"REGISTER":return Object(p.a)(Object(p.a)({},e),{},{register:t.payload});case"LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{logout:t.payload});case"ALL_USERS":return Object(p.a)(Object(p.a)({},e),{},{users:t.payload});case"UPDATE_PROFIL":return Object(p.a)(Object(p.a)({},e),{},{profil:t.payload});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_POSTS":return Object(p.a)(Object(p.a)({},e),{},{allPosts:t.payload});case"GET_USER":return Object(p.a)(Object(p.a)({},e),{},{users:t.payload});case"USER_POSTS":return Object(p.a)(Object(p.a)({},e),{},{userPosts:t.payload});case"ADD_POST":return Object(p.a)(Object(p.a)({},e),{},{addPost:t.payload});case"GET_POST":return Object(p.a)(Object(p.a)({},e),{},{getPost:t.payload});default:return e}},comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COMMENT":return Object(p.a)(Object(p.a)({},e),{},{addPost:t.payload});default:return e}}}),b=a(4),v=a(5),O=a(7),f=a(6),g=a(8),x=a.n(g),N="http://localhost:3001/api",y="http://localhost:3001/uploads/";function C(e){return{type:"LOGIN",payload:x.a.post("".concat(N,"/login"),e,{withCredentials:!0}).then((function(e){return e.data}))}}function I(){return{type:"AUTH",payload:x.a.get("".concat(N,"/auth"),{withCredentials:!0}).then((function(e){return e.data}))}}function D(e){return{type:"REGISTER",payload:x.a.post("".concat(N,"/register"),e).then((function(e){return e.data}))}}function P(){return{type:"LOGOUT",payload:x.a.get("".concat(N,"/logout"),{withCredentials:!0}).then((function(e){return e.data}))}}function w(){return{type:"ALL_USERS",payload:x.a.get("".concat(N,"/users"),{withCredentials:!0}).then((function(e){return e.data}))}}function S(e){return{type:"UPDATE_PROFIL",payload:x()({method:"post",url:"".concat(N,"/update_profil"),data:e,headers:{"Content-Type":"multipart/form-data",withCredentials:!0}}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}var k=a(56),L=a.n(k),A=(a(109),a(110),function(e){return Object(n.jsx)("div",{className:"loading",children:Object(n.jsx)(L.a,{type:"Oval",color:"black",height:80,width:80,visible:!0})})}),T=function(e,t){var a=function(a){Object(O.a)(i,a);var s=Object(f.a)(i);function i(){var e;Object(b.a)(this,i);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=s.call.apply(s,[this].concat(a))).state={loading:!0,dateStart:0},e}return Object(v.a)(i,[{key:"componentDidMount",value:function(){this.props.auth(),this.props.users()}},{key:"componentWillReceiveProps",value:function(e){var a;this.setState({loading:!1}),(null===(a=e.user.login)||void 0===a?void 0:a.isAuth)?(this.setState({dateStart:new Date}),!1===t&&(localStorage.setItem("email",e.user.login.email),this.props.history.push("/"))):t&&this.props.history.push("/login")}},{key:"render",value:function(){return!0===this.state.loading?Object(n.jsx)(A,{}):Object(n.jsx)(e,Object(p.a)(Object(p.a)({},this.props),{},{user:this.props.user,dateStart:this.state.dateStart,uses:this.props.users}))}}]),i}(s.Component);return Object(j.b)((function(e){return{user:e.user}}),(function(e){return Object(d.b)({auth:I,users:w},e)}))(a)},U=a(12),M=a.n(U),F=a(18);function _(){return E.apply(this,arguments)}function E(){return(E=Object(F.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(N,"/posts?order=-1"),{withCredentials:!0}).then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",{type:"ALL_POSTS",payload:t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return B.apply(this,arguments)}function B(){return(B=Object(F.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(N,"/getUser?id=").concat(t),{withCredentials:!0}).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"GET_USER",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return z.apply(this,arguments)}function z(){return(z=Object(F.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(N,"/userPosts?order=-1&id=").concat(t),{withCredentials:!0}).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"USER_POSTS",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return{type:"ADD_POST",payload:x()({method:"post",url:"".concat(N,"/post"),data:e,headers:{"Content-Type":"multipart/form-data",withCredentials:!0}}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}function H(e){return V.apply(this,arguments)}function V(){return(V=Object(F.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(N,"/getPost?").concat(t),{withCredentials:!0}).then((function(e){return e.data}));case 2:return a=e.sent,e.abrupt("return",{type:"GET_POST",payload:a});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(112),a(113);var W=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={numberOfPosts:0},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=this;x.a.get("http://localhost:3001/api/userPosts?order=-1&id=".concat(this.props.userIdItem),{withCredentials:!0}).then((function(t){return e.setState({numberOfPosts:t.data.numberOfPosts})}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"postNumber",children:[Object(n.jsx)("div",{className:"number",children:this.state.numberOfPosts}),Object(n.jsx)("div",{className:"post",children:" Post"})]})}}]),a}(s.Component);var Z=Object(j.b)((function(e){return{user:e.user,post:e.post}}),(function(e){return Object(d.b)({userPosts:q},e)}))(W),Y=(a(114),function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={numberOfComments:0},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=this;x.a.get("http://localhost:3001/api/userComments?order=-1&userId=".concat(this.props.userIdItem),{withCredentials:!0}).then((function(t){return e.setState({numberOfComments:t.data.numberOfComments})}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"commentNumber",children:[Object(n.jsx)("div",{className:"number",children:this.state.numberOfComments})," ",Object(n.jsx)("div",{className:"comment",children:"Comment"})]})}}]),a}(i.a.Component)),J=a(14),K=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={avatar:null},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(F.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:3001/api/getUser?id=".concat(this.props.userId),{withCredentials:!0}).then((function(e){return t.setState({avatar:e.data})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.userId,s=t.showDetails,i=t.id,c=t.icons,r=this.props.user.users,o=function(){"expand-arrows-alt"===c.iconName&&s(i),"compress-arrows-alt"===c.iconName&&e.props.history.push("/")};return Object(n.jsx)("div",{className:"postItem-genaralInfo",children:r&&0!==r.length?r.map((function(t){var s;if(t._id===a)return Object(n.jsxs)("div",{className:"postItemHeader",children:[Object(n.jsx)("div",{className:"postItem-avatar",children:Object(n.jsx)("div",{className:"postItem-avatar-position",children:Object(n.jsx)("img",{className:"avatarImg",src:y+"account/"+(null===(s=e.state.avatar)||void 0===s?void 0:s.doc.avatar),alt:"jamal dine boukir"})})}),Object(n.jsxs)("div",{className:"postItem-avatarInfo",children:[t._id===a?Object(n.jsxs)("div",{className:"avatar-name",children:[t.name," ",t.lastname]},t._id):null,Object(n.jsxs)("div",{className:"avatar-rate",children:[Object(n.jsx)("div",{className:"avatar-rate-post",children:Object(n.jsx)(Z,{userIdItem:t._id},t._id)}),Object(n.jsx)("div",{className:"avatar-rate-comment",children:Object(n.jsx)(Y,{userIdItem:t._id},t._id)})]})]}),Object(n.jsx)("div",{className:"toexpand",children:Object(n.jsx)(J.a,{onClick:o,icon:c,className:"expands"})})]},t._id)})):null})}}]),a}(s.Component),$=(a(117),a(118).Carousel),Q=function(e){var t=e.images;return Object(n.jsx)($,{showArrows:!0,children:t?t.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:y+"post/"+e})," "]},e)})):null})},X=(a(124),a(11)),ee=function(e){var t=e.post.allPosts,a=function(t){e.history.push("/details/id="+t)};return Object(n.jsx)("div",{className:"postItems",children:(null===t||void 0===t?void 0:t.length)>0?t.map((function(t){return Object(n.jsxs)("div",{className:"postItem",children:[Object(n.jsx)(K,Object(p.a)(Object(p.a)({userId:t.userId},e),{},{id:t._id,showDetails:a,icons:X.c})),Object(n.jsxs)("div",{className:"postContainer",children:[Object(n.jsx)("div",{className:"postItem-title",onClick:function(){return a(t._id)},children:t.title}),Object(n.jsx)("div",{className:"postItem-content",children:t.content}),t.img.length>0?Object(n.jsx)("div",{className:"postItem-medias",children:Object(n.jsx)(Q,{images:t.img})}):null]})]},t._id)})):Object(n.jsx)("div",{className:"no-item",children:"No available posts"})})},te=a(27),ae=a(23),ne=a(16),se=a(59),ie=(a(125),function(e){var t,a=e.onImageDrop,i=Object(s.useState)([]),c=Object(ne.a)(i,2),r=c[0],o=c[1],l=Object(s.useState)(-1),d=Object(ne.a)(l,2),u=d[0],m=d[1],j=Object(se.a)({accept:"image/*",maxFiles:5,noClick:!0,noKeyboard:!0,onDrop:function(e){o(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))),a(e)}}),h=j.acceptedFiles,b=j.fileRejections,v=j.getRootProps,O=j.getInputProps,f=j.open;Object(s.useEffect)((function(){r.map((function(e,t){console.log("files??",e)})),console.log("files??",r)}),[r]);Object(s.useEffect)((function(){console.log("run",u)}),[u]);var g=r.map((function(e,t){console.log("ggggg ><>>>>>><<<<<>><<<<><><<<<>",r);var s,i,c=e.name;c.length>12&&(s=c.slice(-4),c=(c=null===(i=c)||void 0===i?void 0:i.substring(0,10))+".."+s);return Object(n.jsx)("div",{className:"thumb thumb-".concat(t),children:Object(n.jsxs)("div",{className:"thumbInner",children:[Object(n.jsx)("img",{src:e.preview,className:"img-thumbInner"}),Object(n.jsxs)("div",{className:"info-thumbInner",children:[Object(n.jsx)("div",{className:"data-name",children:c}),Object(n.jsxs)("div",{className:"data-size",children:[Math.floor(e.size/1e3)," Kbytes"]})]}),Object(n.jsx)("div",{className:"font-dropzone",children:Object(n.jsx)(J.a,{icon:X.i,className:"times",onClick:function(){return function(e){m(e);var t=document.querySelector(".thumb-".concat(e));t.classList.add("d-none"),console.log("thumb",t),console.log("i",e),console.log("acceptedFiles",h),Object(ae.a)(r),console.log("newFiles",r),console.log("splice",e),h.splice(e,1),console.log("acceptedFiles",h),console.log("acceptedFiles",h),a(h),o(h)}(t)}})})]})},e.name)}));Object(s.useEffect)((function(){return function(){r.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[r]),Object(s.useEffect)((function(){console.log("toooooooooooooot")}),[h,r,a]);b.map((function(e){var t=e.file,a=e.errors;return Object(n.jsxs)("li",{children:[t.path," - ",t.size," bytes",Object(n.jsx)("ul",{children:a.map((function(e){return Object(n.jsx)("li",{children:e.message},e.code)}))})]},t.path)}));return console.log("acceptedFiles",h),console.log("files>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>",r),Object(n.jsxs)("div",{className:"section-DropZone",children:[console.log("<>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),Object(n.jsxs)("div",(t={className:""},Object(te.a)(t,"className",h.length>0?"dropZone-list dropZone-list-acceptedFiles":"dropZone-list"),Object(te.a)(t,"children",[Object(n.jsxs)("div",{className:"dropIrem",children:[h.length>0&&Object(n.jsx)("div",{className:"drop-title",children:"Upload Designs"}),Object(n.jsx)("div",Object(p.a)(Object(p.a)({},v({className:h.length>0?"dropzone dropzone-acceptedFiles":"dropzone"})),{},{children:Object(n.jsxs)("div",{className:h.length>0?"uploaddropzone uploaddropzone-acceptedFiles":"uploaddropzone",children:[Object(n.jsx)("input",Object(p.a)({className:"input-dropzone"},O())),Object(n.jsx)("button",{className:h.length>0?"dragFile dragFile-acceptedFiles":"dragFile",type:"button",onClick:f,children:Object(n.jsx)(J.a,{icon:X.e})}),Object(n.jsx)("p",{className:h.length>0?"dragFile-info dragFile-info-acceptedFiles":"dragFile-info",children:"Drag file to upload"}),Object(n.jsx)("p",{className:h.length>0?"dragFile-info-plus dragFile-info-plus-acceptedFiles":"dragFile-info-plus",children:"Avaible formats PNG, JPEG, JPG, SVG ..."})]})}))]}),h.length>0?Object(n.jsx)("div",{className:"dropZone-items",children:Object(n.jsx)("div",{className:"thumbsContainer",children:g})}):null]),t))]})}),ce=(a(126),function(e){var t=e.addPostData,a=e.submitAddPost,s=e.handleChange,i=e.onImageDrop;return Object(n.jsxs)("form",{onSubmit:a,className:"FormAddPost",children:[function(){var e=[];for(var a in t)e.push({id:a,detail:t[a]});return e.map((function(e){return Object(n.jsxs)("div",{className:"title-content",children:["input"===e.detail.element?Object(n.jsx)("input",Object(p.a)(Object(p.a)({className:e.id},e.detail.config),{},{onChange:s})):null,"textarea"===e.detail.element?Object(n.jsx)("textarea",Object(p.a)(Object(p.a)({className:e.id},e.detail.config),{},{onChange:s})):null]},e.id)}))}(),Object(n.jsx)("div",{className:"dropZone",children:Object(n.jsx)(ie,{onImageDrop:i})}),Object(n.jsx)("button",{className:"addPost-btn",disabled:""===t.content.value||""===t.title.value,children:Object(n.jsx)(J.a,{icon:X.g})})]})}),re=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).submitAddPost=function(e){var t=new FormData;if(t.set("title",n.state.addPostData.title.value),t.set("content",n.state.addPostData.content.value),t.set("video",""),t.set("userId",n.props.user.login.id),n.state.acceptedFiles.length>0)for(var a=0;a<n.state.acceptedFiles.length;a+=1)t.append("file",n.state.acceptedFiles[a]);n.props.addPost(t),alert("hahahahhahahahahh")},n.onImageDrop=function(e){n.setState({acceptedFiles:e})},n.handleChange=function(e){var t=e.target,a=t.value,s=t.name,i=Object(p.a)({},n.state.addPostData);s===n.state.addPostData.title.config.name&&(i.title.value=a,n.setState({addPostDataNested:i})),s===n.state.addPostData.content.config.name&&(i.content.value=a,n.setState({addPostDataNested:i}))},n.state={addPostData:{title:{value:"",label:!1,labelText:"Title",element:"input",config:{type:"text",name:"title",placeholder:"Title"},validation:{required:!1},valid:!0,validationMessage:"",touched:!1},content:{value:"",label:!1,labelText:"Content",element:"textarea",config:{type:"text",name:"content",placeholder:"Content here ..."},validation:{required:!1},valid:!1,validationMessage:"",touched:!1}},formData:null,acceptedFiles:[]},n}return Object(v.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t;(null===(t=e.post.addPost)||void 0===t?void 0:t.post)&&(console.log(this.props),this.props.users())}},{key:"render",value:function(){return Object(n.jsx)(ce,{addPostData:this.state.addPostData,submitAddPost:this.submitAddPost,handleChange:this.handleChange,onImageDrop:this.onImageDrop})}}]),a}(s.Component);var oe=Object(j.b)((function(e){return{addingPost:e.post.addPost}}),(function(e){return Object(d.b)({addPost:G},e)}))(re),le=(a(127),function(e){return Object(n.jsx)("div",{className:"thePoster",children:Object(n.jsxs)("div",{className:"posts",children:[Object(n.jsx)("div",{className:"postList",children:Object(n.jsx)(ee,Object(p.a)({},e))}),Object(n.jsx)("div",{className:"addPost",children:Object(n.jsx)(oe,Object(p.a)({},e))})]})})}),de=(a(128),function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).logOut=function(){e.props.history.push("/logout")},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.allPosts(),this.props.users()}},{key:"getUserById",value:function(e,t){t(e)}},{key:"render",value:function(){return Object(n.jsx)(le,Object(p.a)(Object(p.a)({},this.props),{},{logOut:this.logOut,getUserById:this.getUserById}))}}]),a}(i.a.Component));var ue=Object(j.b)((function(e){return{user:e.user,post:e.post}}),(function(e){return Object(d.b)({logout:P,allPosts:_,getUser:R,users:w},e)}))(de),me=(a(129),function(e){var t,a,s,i,c,r,o=e.togglePopin;return Object(n.jsx)("div",{className:"avatar",children:(null===(t=e.user.login)||void 0===t?void 0:t.avatar)?Object(n.jsx)("img",{className:"headerAvatarImg",src:y+"account/"+(null===(a=e.user.login)||void 0===a?void 0:a.avatar),alt:"the poster",onClick:o}):Object(n.jsxs)("div",{onClick:o,className:"headerAvatarLetters",children:[null===(s=e.user.login)||void 0===s||null===(i=s.lastname)||void 0===i?void 0:i.substring(0,1),null===(c=e.user.login)||void 0===c||null===(r=c.name)||void 0===r?void 0:r.substring(0,1)]})})}),je=(a(130),function(e){var t=e.logOut,a=e.actions,s=e.togglePopin,c=i.a.useState(!1),r=Object(ne.a)(c,2);r[0],r[1];return Object(n.jsx)(n.Fragment,{children:a?Object(n.jsxs)("div",{className:"popIN",children:[Object(n.jsx)("div",{className:"postActions",onClick:s}),Object(n.jsxs)("div",{className:"headerActions",children:[Object(n.jsx)("div",{className:"closedActions",onClick:s,children:Object(n.jsx)(J.a,{icon:X.g,className:"closed"})}),Object(n.jsxs)("div",{className:"nameNav",children:[Object(n.jsx)(J.a,{icon:X.j,className:"user"}),Object(n.jsxs)("div",{className:"name",onClick:function(){s(),e.history.push("/profil")},children:[e.user.login.name," ",e.user.login.lastname]})]}),Object(n.jsxs)("div",{className:"logout",children:[Object(n.jsx)(J.a,{icon:X.h,className:"powerOff"}),Object(n.jsx)("div",{className:"logoutNav",onClick:t,children:"LOGOUT"})]})]})]}):null})}),pe=(a(131),function(e){var t=e.logOut,a=Object(s.useState)(!1),i=Object(ne.a)(a,2),c=i[0],r=i[1],o=function(){r(!c)};return Object(n.jsx)("div",{className:"header",children:Object(n.jsxs)("div",{className:"test",children:[Object(n.jsx)("div",{className:"thePoster",onClick:function(){e.history.push("/")},children:"THE POSTER"}),Object(n.jsxs)("div",{className:"navHeader",children:[Object(n.jsx)("div",{className:"header-avatar-position",children:Object(n.jsx)(me,Object(p.a)(Object(p.a)({},e),{},{togglePopin:o}))}),Object(n.jsx)(je,Object(p.a)(Object(p.a)({logOut:t,actions:c},e),{},{togglePopin:o}))]})]})})}),he=function(e){return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(pe,Object(p.a)(Object(p.a)({},e),{},{logOut:function(){e.history.push("/logout")}})),Object(n.jsx)(ue,Object(p.a)({},e))]})},be=(a(132),a(133),function(e){var t=e.children,a=e.formSubmit,s=e.active,i=e.signUp,c=e.accountTxt,r=e.account,o=e.action,l=e.login,d=e.slogo,u=e.loader;return Object(n.jsx)("div",{className:"hoc",children:Object(n.jsxs)("form",{className:"login_container",onSubmit:a,children:[Object(n.jsx)(J.a,{icon:X.f,className:"paper"}),Object(n.jsxs)("div",{className:"all-form",children:[Object(n.jsx)("div",{className:"firstBoule"}),Object(n.jsxs)("div",{className:"all-log",children:[Object(n.jsxs)("div",{className:"logo",children:[Object(n.jsx)("div",{className:"login-login",children:l}),Object(n.jsx)("div",{className:"txt-logo",children:d})]}),Object(n.jsxs)("div",{className:"log",children:[t,Object(n.jsx)("div",{className:"btn-wrapp",children:u?Object(n.jsx)(A,{}):Object(n.jsx)("button",{className:"sign",type:"submit",disabled:!s,children:o})})]}),Object(n.jsxs)("div",{className:"account",children:[Object(n.jsx)("div",{className:"account-txt",children:c}),Object(n.jsx)("div",{className:"account-create",onClick:i,children:r})]})]}),Object(n.jsx)("div",{className:"lastBoule"})]})]})})}),ve=function(e){var t=e.active,a=Object(s.useState)(!1),i=Object(ne.a)(a,2),c=i[0],r=i[1],o=Object(s.useState)(!1),l=Object(ne.a)(o,2),d=l[0],u=l[1];Object(s.useEffect)((function(){e.user.login&&("auth failled, email not found"===e.user.login.message?r(!0):r(!1),"Wrong password"===e.user.login.message?u(!0):u(!1)),c&&e.handleLoginValid(),d&&e.handlePasswordValid()}),[e.user.login,c,d]);var m=function(t){var a=null,s=t.setting;switch(s.element){case"input":a=Object(n.jsxs)("div",{className:"login-fileds",children:[Object(n.jsx)(J.a,{icon:"Password"===t.id?X.d:X.b,className:"envoloe-key"}),Object(n.jsxs)("div",{className:"input-with-errors",children:["Password"===t.id?Object(n.jsx)("input",Object(p.a)(Object(p.a)({id:t.id,className:d?"not-input-field":"input-field"},s.config),{},{onChange:e.onChange})):Object(n.jsx)("input",Object(p.a)(Object(p.a)({id:t.id,className:c?"not-input-field":"input-field"},s.config),{},{onChange:e.onChange,value:t.setting.value}))," "]})]});break;default:a=null}return a};return Object(n.jsx)(be,{login:"Login",slogo:"Your day as you want",formSubmit:function(t){t.preventDefault();var a={email:e.loginData.Login.value,password:e.loginData.Password.value};e.handleSubmit(a)},active:t,signUp:function(){e.history.push("/register")},accountTxt:"don't have an account ?",account:"Create account",action:"Login",children:function(){var t=e.loginData,a=[];for(var s in t)a.push({id:s,setting:t[s]});return a.map((function(e){return Object(n.jsx)("div",{className:"template-login",children:m(e)},e.id)}))}()})},Oe=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).handleActive=function(){n.state.loginData.Password.value.length>=8&&/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(document.getElementById("Login").value)?n.setState({active:!0}):n.setState({active:!1})},n.handleInput=function(e){var t=e.target,a=t.value,s=t.name,i=Object(p.a)({},n.state.loginData);s===n.state.loginData.Login.config.name&&(i.Login.value=a,n.setState({loginDataNested:i})),s===n.state.loginData.Password.config.name&&(i.Password.value=a,n.setState({loginDataNested:i})),n.handleActive()},n.handleLoginValid=function(){var e=Object(p.a)({},n.state.loginData);e.Login.valid=!0,n.setState({loginValid:e})},n.handlePasswordValid=function(){Object(p.a)({},n.state.loginData.Password.valid);n.setState({passwordValid:true})},n.handleSubmit=function(e){n.props.login(e)},n.state={loginData:{Login:{value:"sssss",label:!0,labelText:"Login",element:"input",config:{type:"email",name:"login",placeholder:"E-mail Address"},validation:{required:!0,minLen:5},valid:!1,validationMessage:"",touched:!1},Password:{value:"",label:!0,labelText:"Password",element:"input",config:{type:"password",name:"password",placeholder:"Password"},validation:{required:!0,minLen:5},valid:!1,validationMessage:"",touched:!1}},active:!1},n}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=Object(p.a)({},this.state.loginData),t=localStorage.getItem("email");""!==t&&(e.Login.value=t,this.setState({loginDataNested:e}))}},{key:"render",value:function(){return Object(n.jsx)(ve,Object(p.a)(Object(p.a)({},this.props),{},{signIn:this.signIn,loginData:this.state.loginData,onChange:this.handleInput,handleLoginValid:this.handleLoginValid,handlePasswordValid:this.handlePasswordValid,handleSubmit:this.handleSubmit,active:this.state.active}))}}]),a}(s.Component);var fe=Object(j.b)((function(e){return{user:e.user}}),(function(e){return Object(d.b)({login:C},e)}))(Oe),ge=function(e){return Object(n.jsx)(fe,Object(p.a)({},e))},xe=(a(134),function(e){var t=e.registerData,a=e.signIn,s=e.handleInput,i=e.touched,c=e.validation,r=e.success,o=e.duplicatedUser,l=e.setLoader,d=e.loader,u=e.active,m=[],j=function(e){return console.log("item",e),Object(n.jsxs)("div",{className:"login-fileds",children:["password"===e.field?Object(n.jsx)(J.a,{icon:X.d,className:"envoloe-key"}):"email"===e.field?Object(n.jsx)(J.a,{icon:X.b,className:"envoloe-key"}):"name"===e.field?Object(n.jsx)(J.a,{icon:X.j,className:"envoloe-key"}):"lastname"===e.field?Object(n.jsx)(J.a,{icon:X.k,className:"envoloe-key"}):null,Object(n.jsxs)("div",{className:"input-with-errors",children:[Object(n.jsx)("input",Object(p.a)(Object(p.a)({id:e.field,value:e.fieldContent.value},e.fieldContent.config),{},{className:!e.fieldContent.valid||e.fieldContent.validationMessage?"not-input-field":"input-field",onChange:s,onBlur:i})),e.fieldContent.validationMessage?Object(n.jsxs)("div",{className:"input-err",children:[" ",e.fieldContent.validationMessage," "]}):null]})]})};return Object(n.jsxs)(be,{login:"Sign In",slogo:"Register and enjoy the day",formSubmit:function(e){e.preventDefault(),c()},active:u,signUp:a,accountTxt:"have an account ?",account:"Sing In",action:"Sign Up",setLoader:l,loader:d,children:[function(){for(var e in t)m.push({field:e,fieldContent:t[e]});return m.map((function(e){return Object(n.jsx)("div",{className:"template-login",children:j(e)},e.field)}))}(),Object(n.jsx)("div",{className:"valid registration !"===o?"duplicat":"signUp-db-error",children:r?o:"error, please re-try"})]})}),Ne=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={registerData:{email:{value:"",label:!0,labelText:"Email",element:"input",config:{type:"email",name:"email",placeholder:"Email"},validation:{required:!0},valid:!1,validationMessage:"",touched:!1},password:{value:"",label:!0,labelText:"Password",element:"input",config:{type:"password",name:"password",placeholder:"Password"},validation:{required:!0,minLen:8},valid:!1,validationMessage:"",touched:!1},name:{value:"",label:!0,labelText:"Name",element:"input",config:{type:"text",name:"name",placeholder:"Name"},validation:{required:!0},valid:!1,validationMessage:"",touched:!1},lastname:{value:"",label:!0,labelText:"Lastname",element:"input",config:{type:"text",name:"lastname",placeholder:"Lastname"},validation:{required:!0},valid:!1,validationMessage:"",touched:!1}},allUsers:[],validate:!0,success:!0,duplicatedUser:"",loader:!1,active:!1},e.setLoader=function(){e.setState({loader:!e.state.loader})},e.signIn=function(){e.props.history.push("/login")},e.touchedInput=function(t,a,n){var s=Object(p.a)({},e.state.registerData);for(var i in s)"email"===a&&e.validEmail(a,n),"password"===a&&e.validPassword(a,n),"name"===a&&e.validNameLastName(a,n,"Name required"),"lastname"===a&&e.validNameLastName(a,n,"Lastname required")},e.validEmail=function(t,a){var n=Object(p.a)({},e.state.registerData);n.email.value=a;/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(document.getElementById("email").value)?(n[t].validationMessage="",n[t].valid=!0,e.setState({registerDataNested:n})):(""===n[t].value?n[t].validationMessage="Email required":n[t].validationMessage="Email format incorrect",n[t].valid=!1,e.setState({registerDataNested:n}),e.setState({validate:!1}))},e.validPassword=function(t,a){var n=Object(p.a)({},e.state.registerData);n.password.value=a,""===n[t].value?(n[t].validationMessage="Password required",e.setState({registerDataNested:n})):(n[t].validationMessage="",n[t].value.length>=8?n[t].valid=!0:(n[t].valid=!1,n[t].validationMessage="".concat(n[t].validation.minLen," caracteres at least for the password !")),e.setState({registerDataNested:n}))},e.validNameLastName=function(t,a,n){var s=Object(p.a)({},e.state.registerData);"name"===t&&(s.name.value=a),"lastname"===t&&(s.lastname.value=a),""===s[t].value?(s[t].validationMessage=n,e.setState({registerDataNested:s})):(s[t].validationMessage="",s[t].valid=!0,e.setState({registerDataNested:s}))},e.handleInput=function(t){e.setState({active:!0});var a=t.target,n=a.value,s=a.name;for(var i in e.touchedInput(a,s,n),e.state.registerData)if(!1===e.state.registerData[i].valid){e.setState({active:!1});break}},e.touched=function(t){var a=t.target,n=a.name,s=a.value;e.touchedInput(a,n,s)},e.validation=function(){e.setState({validate:!0,loader:!0});var t={email:e.state.registerData.email.value,password:e.state.registerData.password.value,name:e.state.registerData.name.value,lastname:e.state.registerData.lastname.value};setTimeout((function(){var a=!1;if(!0===e.state.validate)if(e.state.allUsers.filter((function(t){if(t.email===e.state.registerData.email.value)return a=!0})),a){var n=Object(p.a)({},e.state.registerData);n.email.validationMessage="Email already exist !",n.email.valid=!1,e.setState({registerDataNested:n,loader:!1,active:!1})}else e.props.register(t),e.setState({duplicatedUser:"Valid registration! SignIn bellow",loader:!1}),localStorage.setItem("email",e.state.registerData.email.value),setTimeout((function(){}),3e3);else console.log("validate is still false, please correct !")}),2e3)},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.props.users()}},{key:"componentWillReceiveProps",value:function(e){this.setState({allUsers:e.user.users}),this.setState({success:e.user.register?e.user.register.success:this.state.success})}},{key:"render",value:function(){return Object(n.jsx)(xe,Object(p.a)(Object(p.a)({},this.props),{},{registerData:this.state.registerData,signIn:this.signIn,handleInput:this.handleInput,touched:this.touched,validation:this.validation,success:this.state.success,duplicatedUser:this.state.duplicatedUser,loader:this.state.loader,setLoader:this.setLoader,active:this.state.active}))}}]),a}(s.Component);var ye=Object(j.b)((function(e){return{user:e.user}}),(function(e){return Object(d.b)({register:D,users:w},e)}))(Ne),Ce=function(e){return Object(n.jsx)(ye,Object(p.a)({},e))},Ie=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;x.a.get("http://localhost:3001/api/logout",{withCredentials:!0}).then((function(t){return setTimeout((function(){e.props.history.push("/")}),2e3)}))}},{key:"render",value:function(){return Object(n.jsx)(A,{})}}]),a}(s.Component),De=function(e){return Object(n.jsx)(Ie,Object(p.a)({},e))},Pe=a(35),we=a.n(Pe),Se=(a(135),a(138),function(e){var t=e.updateProfilData,a=e.submitUpdateProfil,s=e.handleChange,i=e.inputField,c=e.handleChangeHere;return Object(n.jsxs)("form",{onSubmit:a,className:"formUpdateProfil",children:[Object(n.jsx)("div",{className:"medias",children:function(){var e=[];for(var a in t)e.push({id:a,detail:t[a]});return e.map((function(e){return Object(n.jsx)("div",{children:"file"===e.detail.config.type?Object(n.jsx)("div",{className:"title-content",children:Object(n.jsxs)("div",{className:"details-medias",children:[!0===e.detail.touched?Object(n.jsx)("img",{src:e.detail.value,width:"108",height:"87",className:"input-image"}):Object(n.jsx)("img",{src:y+"account/"+e.detail.value,className:"input-image"}),Object(n.jsx)("input",Object(p.a)(Object(p.a)({},e.detail.config),{},{onChange:c,ref:i,className:"input-media"}))]})},e.id):null},e.id)}))}()}),Object(n.jsxs)("div",{className:"about",children:[Object(n.jsx)("div",{className:"about-me",children:function(){var e=[];for(var a in t)e.push({id:a,detail:t[a]});return e.map((function(e){return Object(n.jsx)("div",{className:"title-content",children:"text"===e.detail.config.type?Object(n.jsx)("input",Object(p.a)(Object(p.a)({className:e.id},e.detail.config),{},{onChange:s,value:e.detail.value})):null},e.id)}))}()}),Object(n.jsx)("button",{className:"updateProfil-btn",children:"Save"})," "]})]})}),ke=(a(139),function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).inputField=i.a.createRef(),e.state={updateProfilData:{name:{value:e.props.user.login.name,label:!1,labelText:"name",element:"input",config:{type:"text",name:"name",placeholder:"Name"},validation:{required:!1},valid:!0,validationMessage:"",touched:!1},lastname:{value:e.props.user.login.lastname,label:!1,labelText:"lastname",element:"input",config:{type:"text",name:"lastname",placeholder:"lastname"},validation:{required:!1},valid:!0,validationMessage:"",touched:!1},avatar:{value:e.props.user.login.avatar,label:!1,labelText:"avatar",element:"input",config:{type:"file",name:"avatar",placeholder:"avatar"},validation:{required:!1},valid:!0,validationMessage:"",touched:!1}},update:!1},e.submitUpdateProfil=function(t){t.preventDefault();var a=new FormData;a.set("id",e.props.user.login.id),a.set("name",e.state.updateProfilData.name.value),a.set("lastname",e.state.updateProfilData.lastname.value),void 0!==e.inputField.current.files[0]&&a.append("file",e.inputField.current.files[0]),e.props.updateProfil(a)},e.handleChange=function(t){var a=t.target,n=a.value,s=a.name,i=Object(p.a)({},e.state.updateProfilData);s===e.state.updateProfilData.name.config.name&&(i.name.value=n,e.setState({updateProfilDataNested:i})),s===e.state.updateProfilData.lastname.config.name&&(i.lastname.value=n,e.setState({updateProfilDataNested:i}))},e.updateAccount=function(){e.setState({update:!e.state.update})},e.handleChangeHere=function(t){var a=t.target,n=(a.value,a.name),s=Object(p.a)({},e.state.updateProfilData);n===e.state.updateProfilData.avatar.config.name&&(s.avatar.value=URL.createObjectURL(t.target.files[0]),s.avatar.touched=!0,e.setState({updateProfilDataNested:s}))},e.logOut=function(){e.props.history.push("/logout")},e}return Object(v.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t;(null===(t=e.user.profil)||void 0===t?void 0:t.success)&&(this.props.users(),this.props.history.push("/"))}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"profils",children:Object(n.jsxs)("div",{className:"profil",children:[!1===this.state.update&&Object(n.jsxs)("div",{className:"show-profil",children:[Object(n.jsx)("div",{className:"up-avatar",children:Object(n.jsxs)("div",{className:"avatar-name",children:[Object(n.jsx)(me,Object(p.a)({},this.props)),Object(n.jsxs)("div",{className:"to-update",children:[Object(n.jsxs)("div",{className:"about",children:[Object(n.jsxs)("p",{className:"firstname",children:["First name: ",this.props.user.login.name]}),Object(n.jsxs)("p",{className:"lastname",children:["Last name: ",this.props.user.login.lastname]})]}),Object(n.jsx)("button",{className:"update-profil",onClick:this.updateAccount,children:"Update"})]})]})}),Object(n.jsxs)("div",{className:"account",children:[Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"lastConnexion",children:[Object(n.jsx)("div",{className:"label",children:"Registration date"}),Object(n.jsx)(we.a,{className:"time",parse:"YYYY-MM-DD HH:mm",children:this.props.user.login.registration})]}),Object(n.jsxs)("div",{className:"lastConnexion",children:[Object(n.jsx)("div",{className:"label",children:"Last connexion"}),Object(n.jsx)(we.a,{className:"time",format:"YYYY/MM/DD",children:this.props.dateStart})]})]})]}),!0===this.state.update&&Object(n.jsx)("div",{className:"update-profil",children:Object(n.jsx)(Se,Object(p.a)(Object(p.a)({},this.props),{},{onImageDrop:this.onImageDrop,handleChange:this.handleChange,submitUpdateProfil:this.submitUpdateProfil,updateProfilData:this.state.updateProfilData,inputField:this.inputField,handleChangeHere:this.handleChangeHere}))})]})})}}]),a}(s.Component));var Le=Object(j.b)((function(e){return{user:e.user}}),(function(e){return Object(d.b)({updateProfil:S},e)}))(ke),Ae=function(e){return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)(pe,Object(p.a)(Object(p.a)({},e),{},{logOut:function(){e.history.push("/logout")}})),Object(n.jsx)(Le,Object(p.a)({},e))]})},Te=(a(140),function(e){var t=e.addCommentData,a=e.submitAddComment,s=e.handleChange;e.postId,e.userId;return Object(n.jsx)("form",{onSubmit:a,className:"FormAddComment",children:function(){var e=[];for(var a in t)e.push({id:a,detail:t[a]});return e.map((function(e){return Object(n.jsx)("div",{className:"title-content",children:"input"===e.detail.element?Object(n.jsx)("input",Object(p.a)(Object(p.a)({className:e.id},e.detail.config),{},{onChange:s})):null},e.id)}))}()})});function Ue(e){return{type:"ADD_COMMENT",payload:x()({method:"post",url:"".concat(N,"/comment"),data:e,headers:{withCredentials:!0}}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}}var Me=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).submitAddComment=function(e){var t=n.props,a=t.userId,s=t.postId,i=t.commentBackId,c={comment:n.state.addCommentData.comment.value,userId:a,postId:s,commentBackId:i};n.props.addComment(c)},n.handleChange=function(e){var t=e.target,a=t.value,s=t.name,i=Object(p.a)({},n.state.addCommentData);s===n.state.addCommentData.comment.config.name&&(i.comment.value=a,n.setState({addCommentDataNested:i}))},n.state={addCommentData:{comment:{value:"",label:!1,labelText:"Comment",element:"input",config:{type:"text",name:"comment",placeholder:"comment here ..."},validation:{required:!1},valid:!1,validationMessage:"",touched:!1}},formData:null},n}return Object(v.a)(a,[{key:"render",value:function(){return Object(n.jsx)(Te,Object(p.a)({addCommentData:this.state.addCommentData,submitAddComment:this.submitAddComment,handleChange:this.handleChange},this.props))}}]),a}(s.Component);var Fe=Object(j.b)((function(e){return{}}),(function(e){return Object(d.b)({addComment:Ue},e)}))(Me),_e=(a(141),a(142),function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={image:[]},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=Object(F.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:3001/api/getAvatarUser?id=".concat(this.props.userId),{withCredentials:!0}).then((function(e){return t.setState({image:e.data})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsx)("div",{className:"componentAvatar",children:Object(n.jsx)("img",{className:"avatar-c",src:y+"account/"+this.state.image.avatar})})}}]),a}(i.a.Component)),Ee=function(e){var t=e.item,a=e.postId,i=e.listOfComments,c=(e.nbrComment,Object(s.useState)(!1)),r=Object(ne.a)(c,2);r[0],r[1];return Object(n.jsxs)("div",{className:"commentList child",children:[Object(n.jsxs)("div",{className:"comment-avatar",children:[Object(n.jsx)(_e,{userId:t.userId}),Object(n.jsx)("div",{className:"comment",children:Object(n.jsx)("div",{className:"item-comment",children:t.comment})})]}),i.map((function(e){if(e._id===t.commentBackId)return Object(n.jsx)("div",{children:Object(n.jsx)(Be,{item:t,postId:a,listOfComments:i})},e._id)}))]},t._id)},Re=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={fullname:""},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=Object(F.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:3001/api/oneuser?id=".concat(this.props.userId),{withCredentials:!0}).then((function(e){return t.setState({fullname:e.data})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"comment-name",children:[this.state.fullname.name," ",this.state.fullname.lastname]})}}]),a}(i.a.Component),Be=function(e){var t=e.item,a=e.postId,i=e.listOfComments,c=e.nbrComment,r=Object(s.useState)(!1),o=Object(ne.a)(r,2),l=o[0];o[1];return Object(n.jsx)("div",{children:"n/a"===t.commentBackId?Object(n.jsxs)("div",{className:"commentList",children:[Object(n.jsxs)("div",{className:"comment-avatar",children:[Object(n.jsx)(_e,{userId:t.userId}),Object(n.jsxs)("div",{className:"comment",children:[Object(n.jsxs)("div",{className:"item-comment",children:[Object(n.jsx)(Re,{userId:t.userId}),t.comment]}),l&&Object(n.jsxs)("div",{className:"comments replay",children:[Object(n.jsx)(me,Object(p.a)({},e)),Object(n.jsx)(Fe,Object(p.a)(Object(p.a)({},e),{},{userId:e.user.login.id,postId:a,commentBackId:t._id}))]})]})]}),i.map((function(a){if(t._id===a.commentBackId)return Object(n.jsx)("div",{children:Object(n.jsx)(Ee,Object(p.a)(Object(p.a)({},e),{},{item:a,postId:e.postId,listOfComments:i,nbrComment:c}))},a._id)}))]},t._id):null})},qe=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={listOfComments:[],nbrComment:0,commentlists:[],commentlistwithoutNA:[],result:[],listItems:[],last:[]},e.commentById=function(t){e.setState({last:[]}),e.state.listOfComments.map((function(a){if(a.commentBackId===t)return e.setState({listItems:a}),e.state.listOfComments.map((function(t){t.commentBackId===a._id&&e.setState({last:[].concat(Object(ae.a)(e.state.last),[t])})})),e.setState({listItems:[e.state.listItems,{branch:e.state.last}]}),e.setState({result:[].concat(Object(ae.a)(e.state.result),[e.state.listItems])})}))},e}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=Object(F.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("http://localhost:3001/api/postComments?order=-1&postId=".concat(this.props.postId),{withCredentials:!0}).then((function(e){t.setState({listOfComments:e.data.doc}),t.state.listOfComments.forEach((function(e){"n/a"===e.commentBackId&&t.setState({commentlistwithoutNA:[].concat(Object(ae.a)(t.state.commentlistwithoutNA),[e])})})),t.state.commentlistwithoutNA.map(function(){var e=Object(F.a)(M.a.mark((function e(a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({result:[]}),t.commentById(a._id),t.setState({commentlists:[].concat(Object(ae.a)(t.state.commentlists),[{item:a,res:t.state.result}])});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"commentLists",children:this.state.listOfComments.map((function(t){return Object(n.jsx)("div",{children:Object(n.jsx)(Be,Object(p.a)(Object(p.a)({},e.props),{},{item:t,postId:e.props.postId,listOfComments:e.state.listOfComments,nbrComment:e.state.nbrComment}))},t._id)}))})}}]),a}(i.a.Component),ze=(a(143),function(e){var t=e.singlePost;return Object(n.jsx)("div",{className:"postDetails",children:t?Object(n.jsxs)("div",{className:"postItem",children:[Object(n.jsx)(K,Object(p.a)(Object(p.a)({userId:t.userId},e),{},{icons:X.a})),Object(n.jsxs)("div",{className:"postContainer",children:[Object(n.jsx)("div",{className:"postItem-title",children:t.title}),Object(n.jsx)("div",{className:"postItem-content",children:t.content}),t.img.length>0?Object(n.jsx)("div",{className:"postItem-medias",children:Object(n.jsx)(Q,{images:t.img})}):null,Object(n.jsxs)("div",{className:"comments",children:[Object(n.jsx)(me,Object(p.a)({},e)),Object(n.jsx)(Fe,Object(p.a)(Object(p.a)({},e),{},{userId:e.user.login.id,postId:t._id}))]}),Object(n.jsx)("div",{className:"commentsList",children:Object(n.jsx)(qe,Object(p.a)(Object(p.a)({},e),{},{postId:t._id,item:t}))})]})]},t.id):Object(n.jsx)(A,{})})}),Ge=function(e){Object(O.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).logOut=function(){n.props.history.push("/logout")},n.state={},n}return Object(v.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params;e.id;this.props.getPost(e.id)}},{key:"render",value:function(){return Object(n.jsx)(ze,Object(p.a)(Object(p.a)({},this.props),{},{logOut:this.logOut}))}}]),a}(s.Component);var He=Object(j.b)((function(e){return{singlePost:e.post.getPost}}),(function(e){return Object(d.b)({getPost:H},e)}))(Ge),Ve=(a(144),function(e){return Object(n.jsxs)("div",{className:"forHeader",children:[Object(n.jsx)(pe,Object(p.a)(Object(p.a)({},e),{},{logOut:function(){e.history.push("/logout")}})),Object(n.jsx)(He,Object(p.a)({},e))]})});var We=function(e){var t=Object(d.a)(m.a)(d.d);return Object(n.jsx)(j.a,{store:t(h),children:Object(n.jsx)(o.a,{children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/details/:id",exact:!0,component:T(Ve,!0)}),Object(n.jsx)(l.a,{path:"/login",exact:!0,component:T(ge,!1)}),Object(n.jsx)(l.a,{path:"/register",exact:!0,component:T(Ce,!1)}),Object(n.jsx)(l.a,{path:"/logout",exact:!0,component:T(De,!0)}),Object(n.jsx)(l.a,{path:"/profil",exact:!0,component:T(Ae,!0)}),Object(n.jsx)(l.a,{path:"/",exact:!0,component:T(he,!0)})]})})})};s.Component;r.a.render(Object(n.jsx)(We,{}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.15d4eb4d.chunk.js.map